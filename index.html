<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crypto Invest Demo</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif;}
body{height:100vh;display:flex;justify-content:center;align-items:center;background:linear-gradient(135deg,#0a0a1a,#1c1c3a);color:white;}
.card{background:rgba(255,255,255,0.05);backdrop-filter:blur(15px);padding:25px;border-radius:20px;width:350px;box-shadow:0 0 30px rgba(0,255,255,0.2);transition:0.3s;}
.card:hover{box-shadow:0 0 50px rgba(0,255,255,0.4);}
h2{text-align:center;margin-bottom:15px;}
input,select,button{width:100%;padding:12px;margin-top:10px;border:none;border-radius:10px;font-size:16px;}
button{background:linear-gradient(45deg,#6a00ff,#ff00c8);color:white;font-weight:600;cursor:pointer;transition:0.3s;box-shadow:0 0 10px rgba(255,0,200,0.4);}
button:hover{box-shadow:0 0 20px rgba(255,0,200,0.7);}
p{margin-top:10px;font-weight:500;}
.hidden{display:none;}
.small{font-size:13px;color:#ccc;}
.referral{background:rgba(255,255,255,0.1);padding:8px;margin-top:10px;border-radius:8px;text-align:center;font-weight:600;}
</style>
</head>
<body>

<div class="card" id="auth">
<h2>Crypto Invest</h2>
<input id="username" placeholder="Username">
<input id="password" type="password" placeholder="Password">
<input id="ref" placeholder="Referral code (optional)">
<button onclick="register()">Register</button>
<button onclick="login()">Login</button>
</div>

<div class="card hidden" id="dashboard">
<h2>User Dashboard</h2>
<p id="balance"></p>
<p id="profit"></p>
<div class="referral" id="refcode"></div>
<select id="package">
<option value="">Select Package</option>
<option value="1">1%</option>
<option value="3">3%</option>
<option value="5">5%</option>
</select>
<button onclick="savePackage()">Save Package</button>
<button onclick="claim()">Claim Daily Profit</button>
<button onclick="logout()">Logout</button>
</div>

<div class="card hidden" id="adminPanel">
<h2>Admin Panel</h2>
<div id="users"></div>
<button onclick="logout()">Logout</button>
</div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];
let currentUser = null;

// Admin default
if(!users.find(u=>u.username==="admin")){
    users.push({
        username:"admin",
        password:"admin123",
        balance:0,
        profit:0,
        package:null,
        lastClaim:null,
        referralCode:"ADMIN",
        referredBy:null
    });
    localStorage.setItem("users",JSON.stringify(users));
}

function saveUsers(){localStorage.setItem("users",JSON.stringify(users));}
function generateCode(){return Math.random().toString(36).substring(2,8).toUpperCase();}

function register(){
    let u=document.getElementById("username").value;
    let p=document.getElementById("password").value;
    let ref=document.getElementById("ref").value;
    if(!u||!p){alert("Fill fields");return;}
    if(users.find(x=>x.username===u)){alert("User exists");return;}
    let newUser={
        username:u,
        password:p,
        balance:10,
        profit:0,
        package:null,
        lastClaim:null,
        referralCode:generateCode(),
        referredBy:ref||null
    };
    if(ref){
        let refUser=users.find(x=>x.referralCode===ref);
        if(refUser){refUser.balance+=1;}
    }
    users.push(newUser);
    saveUsers();
    alert("Registered! You got 10$ demo.");
}

function login(){
    let u=document.getElementById("username").value;
    let p=document.getElementById("password").value;
    let user=users.find(x=>x.username===u && x.password===p);
    if(!user){alert("Wrong login");return;}
    currentUser=user;
    if(u==="admin"){
        document.getElementById("auth").classList.add("hidden");
        document.getElementById("adminPanel").classList.remove("hidden");
        loadUsers();
    }else{
        document.getElementById("auth").classList.add("hidden");
        document.getElementById("dashboard").classList.remove("hidden");
        updateUI();
    }
}

function updateUI(){
    document.getElementById("balance").innerText="Balance: $"+currentUser.balance.toFixed(2);
    document.getElementById("profit").innerText="Profit: $"+currentUser.profit.toFixed(2);
    document.getElementById("refcode").innerText="Your Referral Code: "+currentUser.referralCode;
}

function savePackage(){
    currentUser.package=parseInt(document.getElementById("package").value);
    saveUsers();
    alert("Package saved");
}

function claim(){
    if(!currentUser.package){alert("Select package");return;}
    let now=Date.now();
    if(currentUser.lastClaim && now-currentUser.lastClaim<86400000){alert("24 hours not passed");return;}
    let gain=currentUser.balance*(currentUser.package/100);
    currentUser.balance+=gain;
    currentUser.profit+=gain;
    currentUser.lastClaim=now;
    saveUsers();
    updateUI();
}

function loadUsers(){
    let list="";
    users.forEach(u=>{
        list+=`<p>${u.username} - $${u.balance.toFixed(2)}</p>`;
    });
    document.getElementById("users").innerHTML=list;
}

function logout(){location.reload();}
</script>
</body>
</html>
